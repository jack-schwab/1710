<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS 1710 Final Project</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,500|Satisfy" rel="stylesheet">

    <style>
        #scrolly {
            position: relative;
            background-color: #f3f3f3;
            padding: 1rem;
        }

        article {
            position: relative;
            padding: 0;
            max-width: 40rem;
            margin: 0 auto;
        }

        figure {
            text-align: center;
            position: -webkit-sticky;
            position: sticky;
            left: 0;
            width: 100%;
            margin: 0;
            -webkit-transform: translate3d(0, 0, 0);
            -moz-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
            background-color: #8a8a8a;
            z-index: 0;
        }

        figure p {
            position: absolute;
            top: 50%;
            left: 50%;
            -moz-transform: translate(-50%, -50%);
            -webkit-transform: translate(-50%, -50%);
            transform: translate(-50%, -50%);
            font-size: 20px;
            color: #fff;
        }

        .step {
            margin: 0 auto 2rem auto;
            color: #fff;
            background-color: rgba(0, 0, 0, 0.1);
        }

        .step:last-child {
            margin-bottom: 0;
        }

        .step.is-active p {
            background-color: goldenrod;
            color: #3b3b3b;
        }

        .step p {
            text-align: center;
            padding: 1rem;
            font-size: 1.5rem;
            background-color: #3b3b3b;
        }
    </style>

</head>
<body>

<main class="container">

    <div id="section-1" class="page-section section-transition">
        <h1 id="project-title" class="section-title">ENDANGERED SPECIES TRADING IN AFRICA</h1>
        <p class="vis-description">Welcome to our project! Scroll to get started learning about endangered species trading!</p>
        <div class="audio-player" style="text-align: center; margin-top: 20px;">
            <h3>Enjoy some background music:</h3>
            <audio controls>
                <source src="img/jungle.mp3" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
        </div>
        <section id="scrolly">
            <figure>
                <p>Welcome to our project! Scroll to get started learning about endangered species trading!</p>
            </figure>

            <article>
                <div class="step" data-step="1">
                    <p>INTRODUCTION</p>
                </div>
                <div class="step" data-step="2">
                    <p>THE EXTENT OF THE PROBLEM</p>
                </div>
                <div class="step" data-step="3">
                    <p>THE SIGNIFICANCE OF THESE TRADES</p>
                </div>
                <div class="step" data-step="4">
                    <p>THE URGENCY TO SOLVE THIS ISSUE</p>
                </div>
            </article>
        </section>
    </div>

    <div id="section-2" class="page-section section-transition">
        <h1 class="section-title">Endangered Species Matching Game</h1>
        <section id="game-container">
            <div id="ui-container">
                <h3>Flips: <span id="flip-count">0</span></h3>
                <h3>Matches: <span id="match-count">0</span></h3>
            </div>

            <!-- This is where we display the flip and match counters -->
            <div class="container">
                <div class="row">
                    <div class="col-9">


                        <!-- This is where our cards will be rendered -->
                        <div id="card-container">
                        </div>
                    </div>
                    <div class="col-3">
                        <p id="species-explanation">Let's learn some more about endangered species in Africa! Play this matching game to find matches and learn about various endangered species. When you find a match, a paragraph about that species will appear here. Good luck!</p>
                    </div>
                </div>
            </div>
            <div class="btn-container">
                <button class="reset-btn" onclick="resetGame()">Reset</button>
            </div>
        </section>
    </div>

    <div id="section-3" class="page-section section-transition">
        <h1 class="section-title">Video Exploring Illegal Trading</h1>
        <p class="vis-description">Curious to see what illegal endangered species trades look like in practice? In this clip from CNN, reporters investigate a warehouse filled with items from the endangered species trade. The video provides more details about the products of these trades and what measures governments take to stop illegal trading. The video also helps emphasize the scale of this issue, showing how much it impacts certain critically endangered species, such as the <b>black rhino</b>, of which only <b>2,500</b> remained at the time of this video in 2015. After some research, we discovered that the current number in 2024 is an estimated <b>6,400</b> black rhinos; although this increase in population is cause to be optimistic, the species is still critically endangered.</p>
        <div class="row my-5">
            <div class="col-1"></div>
            <div id="video-section" class="col-10 d-flex justify-content-center">

                <iframe width="1000" height="700" src="https://www.youtube.com/embed/HeE9MNKn-zg?si=NxKLmKOft2wTlOBy" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
            </div>
            <div class="col-1"></div>
        </div>
    </div>

    <div id="section-4" class="page-section section-transition">
        <h1 class="section-title">Endangered Species' Traded Products Based On Year</h1>
        <p class="vis-description">We now know that endangered species are traded for a variety of marketable products, but what does the distribution of these products look like? This chart details the breakdown of traded products for every year. Move the slider to see which products increase or decrease in popularity through the years!</p>
        <div class="row my-5">
            <div class="d-flex align-items-center my-3">
                <label for="year-slider" class="me-2">Select Year:</label>
                <input id="year-slider" type="range" class="form-range" />
            </div>
            <div id="chart" class="d-flex justify-content-center"></div>
        </div>
    </div>


    <div id="section-6" class="page-section section-transition">
        <h1 class = section-title>Top Exporters and Importers for Animals</h1>
        <div class="row my-5">
            <div class="col-md-6">
                <h2>Top Exporters for Animals</h2>
                <div id="export-chart"></div>
            </div>
            <div class="col-md-6">
                <h2>Top Importers for Animals</h2>
                <div id="import-chart"></div>
            </div>
        </div>
    </div>

    <div id="section-6.5" class="page-section section-transition">
        <h1 class="section-title">Relationship Between Importers and Exporters</h1>
        <div class="container-fluid" style="height: 100vh; padding-top: 1vh;">

            <div class="section-header"></div>
            <h2 style="text-align: center;">Trade Matrix</h2>
            <div id="info" style="margin: 20px auto 10px auto; max-width: 800px; padding: 20px; border: 1px solid #e0e0e0; border-radius: 10px; background-color: #f9f9f9; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
                <h6 style="text-align: center;">Rows: Exporting countries</h6>
                <h6 style="text-align: center;">Columns: Importing countries</h6>
                <h6 style="text-align: center;">Color intensity shows number of trades</h6>
                <h6 style="text-align: center;">Gray squares indicate no recorded trade</h6>
            </div>
            <div id="importExportMatrix" class="row" style="height: 1200px; margin-top: 10px;"></div>
        </div>
    </div>

    <div id="section-7" class="page-section section-transition">
        <h1 class="section-title">Exports Over Time</h1>
        <p class="vis-description">Continuing to examine the trends of exports over time, we now examine the quantities of these exports. This visualization allows us to view three different quantities of imports and exports. The importer quantity refers to the number of animals imported among the data. The exporter quantity refers to the number of animals exported among the data. Note that these two values are NOT the same: partially since some of our data sets only refer to select countries, and partially because animals sometimes die along the way while being imported/exported. The total quantity refers to the sum of the importer and exporter quantities.</p>
        <div class="row my-5">

            <div class="form-group">
                <!-- Select box to choose the ranking type -->
                <select id="ranking-type">
                    <option value="total-quantity">Total Quantity</option>
                    <option value="importer-quantity">Importer Quantity</option>
                    <option value="exporter-quantity">Exporter Quantity</option>
                </select>
            </div>
            <div id="time-chart"></div>

        </div>
    </div>

    <div id="section-7.5" class="page-section section-transition">
        <h1 class="section-title">African Trade by Animal</h1>
        <div id="map-controls" class="d-flex align-items-center my-3">
            <label for="data-selector" class="me-2">Select Species:</label>
            <select id="data-selector" class="form-select">
                <option value="rhino.csv" selected>Rhino</option>
                <option value="lion.csv">Lion</option>
                <option value="elephant.csv" selected>Elephant</option>
                <option value="leopard.csv">Leopard</option>
            </select>
        </div>
        <div class="container-fluid" style="height: 100vh; padding-top: 1vh;">

            <p style="text-align: center; font-size: 1.2em; margin-top: 1vh;">
                Please select an African country exporter to explore trade routes.
            </p>
            <div id="map" class="row" style="height: 1200px;"></div>
        </div>
    </div>


    <div id="section-8" class="page-section section-transition">
        <h1 class="section-title">Global Trade</h1>
        <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px;">
            Please select a global importer to explore trade routes.
        </p>
        <div class="row my-5">
            <div class="col-md-12">
                <div id="world-map"></div>
            </div>
        </div>
    </div>


    <div id="section-8.5" class="page-section section-transition">
        <h1 class="section-title">Country Flag Finder</h1>
        <div id="flagContainer">
            <p>Exporter country: <span id="exporter-name"></span></p>
            <div id="flagDisplayLeft" class="flagDisplay">
                <!-- Left flag will be displayed here -->
            </div>
            <p>Importer country: <span id="importer-name"></span></p>
            <div id="flagDisplayRight" class="flagDisplay">
                <!-- Right flag will be displayed here -->
            </div>
        </div>
        <div id="flag-chart"></div>
    </div>

    <div id="section-9" class="page-section section-transition">
        <h1 class="section-title">Animal Fun Facts</h1>
        <p class="vis-description">Click on an animal to learn interesting facts about them!</p>
        <div class="row my-5">
            

            <div class="col-md-3">
                <div class="card animal-card" data-animal="rhino">
                    <img src="img/rhino.jpg" class="rounded-circle animal-headshot" alt="Rhino">
                    <h4>Rhino</h4>
                    <div class="card-overlay">
                        <span>Click to learn more</span>
                    </div>
                </div>
                <div class="fun-facts rhino-facts" style="display: none;">
                    <div class="facts-container">
                        <h5>Rhino Facts:</h5>
                        <ul>
                            <li>A rhino's horn is made of keratin - the same material as human fingernails</li>
                            <li>They can run at speeds of up to 30 miles per hour</li>
                            <li>A group of rhinos is called a "crash"</li>
                            <li>Rhinos have existed on Earth for more than 50 million years</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card animal-card" data-animal="lion">
                    <img src="img/lion.jpg" class="rounded-circle animal-headshot" alt="Lion">
                    <h4>Lion</h4>
                    <div class="card-overlay">
                        <span>Click to learn more</span>
                    </div>
                </div>
                <div class="fun-facts lion-facts" style="display: none;">
                    <div class="facts-container">
                        <h5>Lion Facts:</h5>
                        <ul>
                            <li>Lions are the only cats that live in groups, called prides</li>
                            <li>A lion's roar can be heard from up to 5 miles away</li>
                            <li>Female lions do 85-90% of the pride's hunting</li>
                            <li>Lions spend about 20 hours of each day sleeping or resting</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card animal-card" data-animal="elephant">
                    <img src="img/elephant.jpg" class="rounded-circle animal-headshot" alt="Elephant">
                    <h4>Elephant</h4>
                    <div class="card-overlay">
                        <span>Click to learn more</span>
                    </div>
                </div>
                <div class="fun-facts elephant-facts" style="display: none;">
                    <div class="facts-container">
                        <h5>Elephant Facts:</h5>
                        <ul>
                            <li>Elephants are the only mammals that can't jump</li>
                            <li>They communicate through vibrations that can travel through the ground</li>
                            <li>An elephant's trunk has around 40,000 muscles</li>
                            <li>They're one of the few animals that can recognize themselves in a mirror</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card animal-card" data-animal="leopard">
                    <img src="img/leopard.jpg" class="rounded-circle animal-headshot" alt="Leopard">
                    <h4>Leopard</h4>
                    <div class="card-overlay">
                        <span>Click to learn more</span>
                    </div>
                </div>
                <div class="fun-facts leopard-facts" style="display: none;">
                    <div class="facts-container">
                        <h5>Leopard Facts:</h5>
                        <ul>
                            <li>Leopards can carry prey twice their body weight up a tree</li>
                            <li>They can run at speeds of up to 58 kilometers per hour</li>
                            <li>Each leopard's spots are unique, like human fingerprints</li>
                            <li>They're excellent swimmers and enjoy being in water</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="section-10" class="page-section">
        <h1 class="section-title">Wildlife Trade Analysis: 2004-2023</h1>
        <div class="container">
            <h3>This dashboard visualizes 20 years of wildlife trade data, showing patterns and trends across different taxonomic classifications.</h3>
            <div class="row">
                <div class="col-md-6">
                    <div class="chart-container">
                        <div id="area-chart" class="chart">Timeline Overview Chart</div>
                    </div>
                    <div class = "chart-container text-center">
                        <h5>Please use these visualizations to unlock the story of wildlife trade over the past 20 years. The area chart acts as your timeline, revealing how trade volumes have risen, fallen, or shifted. It highlights pivotal moments—spikes that may signal policy changes, economic disruptions, or heightened demand. Use the brush tool to zoom into specific periods and uncover the seasonal or yearly patterns behind the data.
                            Dive deeper with the bar chart, which uncover the biological heartbeat of the trade. The Species Class Distribution highlights which groups, like mammals or reptiles, dominate the industry. The Order, Family, and Taxon charts peel back the layers, pinpointing specific groups or species driving the numbers.
                        </h5>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="chart-container">
                        <h4>Species Class Distribution</h4>
                        <div id="bar-chart-class" class="chart">Bar Chart - Species Class</div>
                    </div>
                    <div class="chart-container">
                        <h4>Order</h4>
                        <div id="bar-chart-order" class="chart">Bar Chart - Order</div>
                    </div>
                    <div class="chart-container">
                        <h4>Family</h4>
                        <div id="bar-chart-family" class="chart">Bar Chart - Family</div>
                    </div>
                    <div class="chart-container">
                        <h4>Taxon</h4>
                        <div id="bar-chart-taxon" class="chart">Bar Chart - Taxon</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="section-11" class="page-section section-transition">
        <h1 class="section-title">Conclusion</h1>
        <div class="row my-5">
            <div class="col-md-12">

                <p>In conclusion, [endangered species trading is BAD unless its for preservation].</p>
            </div>
        </div>
    </div>

    <div id="section-12" class="page-section section-transition">
        <h1 class="section-title">Credits</h1>
        <div class="row my-5">
            <div class="col-md-12">
                <h3>We'd like to thank the CS 1710 staff for all their help and support on this project.</h3>
            </div>
        </div>
        <h3>Website Creators:</h3>
        <div class="row my-5">
            <div id="authors-section" class="d-flex justify-content-center">
                <div class="col-3">
                    <div class="card">
                        <img src="img/leopard.jpg" class="rounded-circle animal-headshot" alt="Author 1">
                        <h4>Sho Sho</h4>
                    </div>
                </div>
                <div class="col-3">
                    <div class="card">
                        <img src="img/lion.png" class="rounded-circle animal-headshot" alt="Author 2">
                        <h4>Elie</h4>
                    </div>
                </div>
                <div class="col-3">
                    <div class="card">
                        <img src="img/rhino.jpg" class="rounded-circle animal-headshot" alt="Author 3">
                        <h4>Jack</h4>
                    </div>
                </div>
                <div class="col-3">
                    <div class="card">
                        <img src="img/elephant.jpg" class="rounded-circle animal-headshot" alt="Author 4">
                        <h4>Daniel</h4>
                    </div>
                </div>
            </div>
        </div>
    </div>

</main>

<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.1/underscore.js" integrity="sha512-qbJl2/KyecDVJdgAwr0Gzhm5KBmkzdUouG+sKmCWP1Idb144ZnfSmCRReuYXPEHIa4j38TwrR2ySeGoFH5gKzA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://bit.ly/491fCed"></script>
<script src="https://unpkg.com/scrollama"></script>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src="https://d3js.org/topojson.v2.min.js"></script>
<script src="https://d3js.org/d3-geo.v1.min.js"></script>
<script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
<script src="js/productcircles.js"></script>

<script src="js/area.js"></script>
<script src="js/areachart.js"></script>
<script src="js/importexportpiechart.js"></script>
<script src="js/mapvis.js"></script>
<script src="js/main.js"></script>
<script src="js/matrix.js"></script>
<script src="js/worldmap.js"></script>
<script src="js/provided.js"></script>
<script src="js/matchingVis.js"></script>
<script src="js/timechart.js"></script>
<script src="js/countryflags.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const sections = document.querySelectorAll('.page-section');

        // fade-in effect
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, {
            threshold: 0.1
        });

        sections.forEach(section => {
            observer.observe(section);
        });

        // Add scroll indicator
        document.addEventListener('click', (e) => {
            if (e.target.closest('.scroll-indicator')) {
                const currentSection = e.target.closest('.page-section');
                const nextSection = currentSection.nextElementSibling;

                if (nextSection) {
                    nextSection.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            }
        });
    });
</script>
<script src="js/scrollama.min.js"></script>
<script>
    // using d3 for convenience
    var main = d3.select("main");
    var scrolly = main.select("#scrolly");
    var figure = scrolly.select("figure");
    var article = scrolly.select("article");
    var step = article.selectAll(".step");

    // initialize the scrollama
    var scroller = scrollama();

    // generic window resize listener event
    function handleResize() {
        // 1. update height of step elements
        var stepH = Math.floor(window.innerHeight * 0.75);
        step.style("height", stepH + "px");

        var figureHeight = window.innerHeight / 2;
        var figureMarginTop = (window.innerHeight - figureHeight) / 2;

        figure
            .style("height", figureHeight + "px")
            .style("top", figureMarginTop + "px");

        // 3. tell scrollama to update new element dimensions
        scroller.resize();
    }

    var paragraphs = ["", "The illegal trade of endangered species in Africa is a critical environmental issue with devastating consequences for biodiversity. Research reveals that over 80% of endangered species are directly impacted by the wildlife trade, which threatens their survival. This multi-billion-dollar industry, valued at an estimated 4 to 20 billion dollars annually, fuels a thriving market for animals and plants.",
        "For instance, in just one year, records showed the trade of 1.5 million live birds and 440,000 tonnes of medicinal plants. The impact is catastrophic: wildlife trade has led to over 60% declines in species abundance, pushing many to the brink of extinction. Addressing this crisis is crucial to preserving the planet's ecological balance and protecting its most vulnerable species.",
        "The endangered species trade refers to the buying, selling, and exchange of animals and plants that are at risk of extinction. This global black market exploits rare species for everything from exotic pets and traditional medicine to luxury goods like ivory and furs. It's a billion-dollar industry fueled by demand and weak enforcement, and it poses a direct threat to biodiversity. Why does this matter? Every species plays a role in its ecosystem. When one disappears, it can cause a domino effect, destabilizing the environment. This trade isn't just about cute or majestic animals—it impacts plants, birds, reptiles, and even insects, all of which are vital to maintaining ecological balance.",
        "Efforts like the Convention on International Trade in Endangered Species of Wild Fauna and Flora (CITES) aim to regulate this trade and protect vulnerable species, but challenges remain. Loopholes, corruption, and high demand make enforcement tough, while climate change and habitat loss amplify the pressure. In short, the endangered species trade is not just an environmental issue—it's a wake-up call. It's about protecting the delicate threads that hold our ecosystems together, and ultimately, safeguarding the planet we all share."]
    // scrollama event handlers
    function handleStepEnter(response) {
        console.log(response);
        // response = { element, direction, index }

        // add color to current step only
        step.classed("is-active", function (d, i) {
            return i === response.index;
        });

        // update graphic based on step
        figure.select("p").text(paragraphs[response.index + 1]);
    }


    function init() {

        // 1. force a resize on load to ensure proper dimensions are sent to scrollama
        handleResize();

        // 2. setup the scroller passing options
        // 		this will also initialize trigger observations
        // 3. bind scrollama event handlers (this can be chained like below)
        scroller
            .setup({
                step: "#scrolly article .step",
                offset: 0.33,
                debug: false
            })
            .onStepEnter(handleStepEnter);
    }

    // kick things off
    init();
</script>


<script>
    document.addEventListener('DOMContentLoaded', function() {
        const animalCards = document.querySelectorAll('.animal-card');

        animalCards.forEach(card => {
            card.addEventListener('click', function() {
                const animal = this.dataset.animal;
                const factSection = document.querySelector(`.${animal}-facts`);

                // Toggle the clicked animal's facts
                if (factSection.style.display === 'none') {
                    factSection.style.display = 'block';
                } else {
                    factSection.style.display = 'none';
                }
            });
        });
    });
</script>



</body>
</html>
